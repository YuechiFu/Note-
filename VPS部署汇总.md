<!DOCTYPE html> <html lang="zh"> <head> <meta charset="utf-8"/> </head> <body><h1 id="h1-vps-"><a name="VPS 部署汇总" class="reference-link"></a><span class="header-link octicon octicon-link"></span>VPS 部署汇总</h1><h2 id="h2-1-centos7-"><a name="1.关于CentOS7 的相关问题" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1.关于CentOS7 的相关问题</h2><h3 id="h3-u5F00u542Fu7AEFu53E3"><a name="开启端口" class="reference-link"></a><span class="header-link octicon octicon-link"></span>开启端口</h3><h4 id="h4-centos-6-"><a name="centos 6 做法" class="reference-link"></a><span class="header-link octicon octicon-link"></span>centos 6 做法</h4><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">iptables </span><span class="pun">-</span><span class="pln">A INPUT </span><span class="pun">-</span><span class="pln">p tcp </span><span class="pun">--</span><span class="pln">dport </span><span class="lit">8388</span><span class="pln"> </span><span class="pun">-</span><span class="pln">j ACCEPT </span></code></li></ol></pre><blockquote> <p>centos7已经开始使用firewall作为防火墙，而不是iptables了</p> </blockquote> <h4 id="h4-firewall-"><a name="Firewall 的相关操作" class="reference-link"></a><span class="header-link octicon octicon-link"></span>Firewall 的相关操作</h4><h5 id="h5-u67E5u770Bu9632u706Bu5899u72B6u6001"><a name="查看防火墙状态" class="reference-link"></a><span class="header-link octicon octicon-link"></span>查看防火墙状态</h5><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">firewall</span><span class="pun">-</span><span class="pln">cmd </span><span class="pun">--</span><span class="pln">state</span></code></li></ol></pre><h5 id="h5-u5F00u542Fu9632u706Bu5899"><a name="开启防火墙" class="reference-link"></a><span class="header-link octicon octicon-link"></span>开启防火墙</h5><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">systemctl start firewalld</span><span class="pun">.</span><span class="pln">servic</span></code></li></ol></pre><h5 id="h5-u91CDu542Fu9632u706Bu5899"><a name="重启防火墙" class="reference-link"></a><span class="header-link octicon octicon-link"></span>重启防火墙</h5><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">systemctl restart firewalld</span><span class="pun">.</span><span class="pln">servic</span></code></li></ol></pre><h5 id="h5-u91CDu65B0u8F7Du5165u914Du7F6E"><a name="重新载入配置" class="reference-link"></a><span class="header-link octicon octicon-link"></span>重新载入配置</h5><p>firewall-cmd —reload<br> //一般我们在修改了防火墙的一些配置后比如打开端口一些操作后，<br> // 都要重启防火墙，再载入配置，才能生效！！！ </p><h5 id="h5--80-"><a name="查看80端口是否开启" class="reference-link"></a><span class="header-link octicon octicon-link"></span>查看80端口是否开启</h5><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">firewall</span><span class="pun">-</span><span class="pln">cmd </span><span class="pun">--</span><span class="pln">query</span><span class="pun">-</span><span class="pln">port</span><span class="pun">=</span><span class="lit">80</span><span class="pun">/</span><span class="pln">tcp </span></code></li></ol></pre><h5 id="h5--80-"><a name="开启80端口" class="reference-link"></a><span class="header-link octicon octicon-link"></span>开启80端口</h5><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">firewall</span><span class="pun">-</span><span class="pln">cmd </span><span class="pun">--</span><span class="pln">zone</span><span class="pun">=</span><span class="kwd">public</span><span class="pln"> </span><span class="pun">--</span><span class="pln">add</span><span class="pun">-</span><span class="pln">port</span><span class="pun">=</span><span class="lit">8080</span><span class="pun">/</span><span class="pln">tcp </span><span class="pun">--</span><span class="pln">permanent</span></code></li></ol></pre><blockquote> <p>—zone=public：表示作用域为公共的；<br>—add-port=8080/tcp：添加tcp协议的端口8080；<br>—permanent：永久生效，如果没有此参数，则只能维持当前服务生命周期内，重新启动后失效； </p></blockquote> <h5 id="h5--80-"><a name="关闭80端口" class="reference-link"></a><span class="header-link octicon octicon-link"></span>关闭80端口</h5><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">firewall</span><span class="pun">-</span><span class="pln">cmd </span><span class="pun">--</span><span class="pln">remove</span><span class="pun">-</span><span class="pln">port</span><span class="pun">=</span><span class="lit">80</span><span class="pun">/</span><span class="pln">tcp </span><span class="pun">--</span><span class="pln">permanent </span></code></li></ol></pre><h5 id="h5-u5176u4ED6u64CDu4F5C"><a name="其他操作" class="reference-link"></a><span class="header-link octicon octicon-link"></span>其他操作</h5><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">systemctl start firewalld </span><span class="com">//启动</span></code></li><li class="L1"><code><span class="pln">systemctl status firewalld </span><span class="com">//查看状态 </span></code></li><li class="L2"><code><span class="pln">systemctl disable firewalld </span><span class="com">//停止</span></code></li><li class="L3"><code><span class="pln">systemctl stop firewalld </span><span class="com">//启动</span></code></li></ol></pre><h2 id="h2-2-centos-shadowsocks-"><a name="2.centos 安装shadowsocks 基本步骤" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2.centos 安装shadowsocks 基本步骤</h2><ul> <li><h3 id="h3-u5B89u88C5"><a name="安装" class="reference-link"></a><span class="header-link octicon octicon-link"></span>安装</h3></li></ul> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">yum update </span><span class="com">//非必须</span></code></li><li class="L1"><code><span class="pln">yum install python</span><span class="pun">-</span><span class="pln">setuptools </span><span class="pun">&amp;&amp;</span><span class="pln"> easy_install pip</span></code></li><li class="L2"><code><span class="pln">pip install shadowsocks </span></code></li></ol></pre><ul> <li><h3 id="h3-u76F4u63A5u542Fu52A8"><a name="直接启动" class="reference-link"></a><span class="header-link octicon octicon-link"></span>直接启动</h3></li></ul> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">ssserver </span><span class="pun">-</span><span class="pln">p </span><span class="lit">8989</span><span class="pln"> </span><span class="pun">-</span><span class="pln">k password </span><span class="pun">-</span><span class="pln">m rc4</span><span class="pun">-</span><span class="pln">md5 </span><span class="pun">-</span><span class="pln">d start</span></code></li></ol></pre><ul> <li><h3 id="h3--json-amp-amp-"><a name="从配置json文件中启动（多用户&amp;单用户&amp;日志记录）" class="reference-link"></a><span class="header-link octicon octicon-link"></span>从配置json文件中启动（多用户&amp;单用户&amp;日志记录）</h3></li></ul> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">vi </span><span class="pun">/</span><span class="pln">etc</span><span class="pun">/</span><span class="pln">shadowsocks</span><span class="pun">.</span><span class="pln">json</span></code></li><li class="L1"><code><span class="pln">ssserver </span><span class="pun">-</span><span class="pln">c </span><span class="pun">/</span><span class="pln">etc</span><span class="pun">/</span><span class="pln">shadowsocks</span><span class="pun">.</span><span class="pln">json </span><span class="pun">-</span><span class="pln">d start</span></code></li><li class="L2"><code><span class="pln">ssserver </span><span class="pun">-</span><span class="pln">c </span><span class="pun">/</span><span class="pln">etc</span><span class="pun">/</span><span class="pln">shadowsocks</span><span class="pun">.</span><span class="pln">json </span><span class="pun">--</span><span class="pln">log</span><span class="pun">-</span><span class="pln">file </span><span class="pun">/</span><span class="kwd">var</span><span class="pun">/</span><span class="pln">log</span><span class="pun">/</span><span class="pln">shadowsocks</span><span class="pun">.</span><span class="pln">log </span><span class="pun">-</span><span class="pln">d start </span><span class="com">//日志记录</span></code></li><li class="L3"><code><span class="pln">tail </span><span class="pun">-</span><span class="pln">f </span><span class="pun">/</span><span class="kwd">var</span><span class="pun">/</span><span class="pln">log</span><span class="pun">/</span><span class="pln">shadowsocks</span><span class="pun">.</span><span class="pln">log </span><span class="com">//查看日志</span></code></li></ol></pre><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-json"><span class="pun">//</span><span class="pln"> </span><span class="pun">多用户类型</span></code></li><li class="L1"><code class="lang-json"><span class="pun">{</span></code></li><li class="L2"><code class="lang-json"><span class="pln"> </span><span class="str">"server"</span><span class="pun">:</span><span class="str">"0.0.0.0"</span><span class="pun">,</span></code></li><li class="L3"><code class="lang-json"><span class="pln"> </span><span class="str">"local_address"</span><span class="pun">:</span><span class="str">"127.0.0.1"</span><span class="pun">,</span></code></li><li class="L4"><code class="lang-json"><span class="pln"> </span><span class="str">"local_port"</span><span class="pun">:</span><span class="lit">1080</span><span class="pun">,</span></code></li><li class="L5"><code class="lang-json"><span class="pln"> </span><span class="str">"port_password"</span><span class="pun">:{</span></code></li><li class="L6"><code class="lang-json"><span class="pln"> </span><span class="str">"8989"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"******"</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L7"><code class="lang-json"><span class="pln"> </span><span class="str">"8988"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"******"</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L8"><code class="lang-json"><span class="pln"> </span><span class="str">"8987"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"******"</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L9"><code class="lang-json"><span class="pln"> </span><span class="str">"9001"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"******"</span><span class="pun">,</span></code></li><li class="L0"><code class="lang-json"><span class="pln"> </span><span class="str">"9002"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"******"</span><span class="pun">,</span><span class="pln"> </span></code></li><li class="L1"><code class="lang-json"><span class="pln"> </span><span class="str">"9003"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"******"</span><span class="pun">,</span></code></li><li class="L2"><code class="lang-json"><span class="pln"> </span><span class="str">"9004"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"******"</span></code></li><li class="L3"><code class="lang-json"><span class="pln"> </span><span class="pun">},</span></code></li><li class="L4"><code class="lang-json"><span class="pln"> </span><span class="str">"timeout"</span><span class="pun">:</span><span class="lit">300</span><span class="pun">,</span></code></li><li class="L5"><code class="lang-json"><span class="pln"> </span><span class="str">"method"</span><span class="pun">:</span><span class="str">"rc4-md5"</span><span class="pun">,</span></code></li><li class="L6"><code class="lang-json"><span class="pln"> </span><span class="str">"fast_open"</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span></code></li><li class="L7"><code class="lang-json"><span class="pun">}</span></code></li></ol></pre> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-json"><span class="pun">//</span><span class="pln"> </span><span class="pun">单用户</span></code></li><li class="L1"><code class="lang-json"><span class="pun">{</span></code></li><li class="L2"><code class="lang-json"><span class="str">"server"</span><span class="pun">:</span><span class="str">"0.0.0.0"</span><span class="pun">,</span></code></li><li class="L3"><code class="lang-json"><span class="str">"server_port"</span><span class="pun">:</span><span class="lit">8388</span><span class="pun">,</span></code></li><li class="L4"><code class="lang-json"><span class="str">"local_address"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"127.0.0.1"</span><span class="pun">,</span></code></li><li class="L5"><code class="lang-json"><span class="str">"local_port"</span><span class="pun">:</span><span class="lit">1080</span><span class="pun">,</span></code></li><li class="L6"><code class="lang-json"><span class="str">"password"</span><span class="pun">:</span><span class="str">"mypassword"</span><span class="pun">,</span></code></li><li class="L7"><code class="lang-json"><span class="str">"timeout"</span><span class="pun">:</span><span class="lit">300</span><span class="pun">,</span></code></li><li class="L8"><code class="lang-json"><span class="str">"method"</span><span class="pun">:</span><span class="str">"rc4-md5"</span></code></li><li class="L9"><code class="lang-json"><span class="pun">}</span></code></li></ol></pre> <ul> <li><h3 id="h3--shadowsocks"><a name="一键搭建shadowsocks" class="reference-link"></a><span class="header-link octicon octicon-link"></span>一键搭建shadowsocks</h3><h6 id="h6--wget-shadowsocks-sh-"><a name="之前一直用的这个方法，就是网上去wget一个 shadowsocks.sh 如果直接安装就行。具体步骤如下" class="reference-link"></a><span class="header-link octicon octicon-link"></span>之前一直用的这个方法，就是网上去wget一个 shadowsocks.sh 如果直接安装就行。具体步骤如下</h6></li></ul> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">wget </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">check</span><span class="pun">-</span><span class="pln">certificate HYPERLINK </span><span class="str">"https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-libev.sh"</span></code></li><li class="L1"><code><span class="com">//或者 </span></code></li><li class="L2"><code><span class="pln">git clone https</span><span class="pun">:</span><span class="com">//github.com/YuechiFu/vpn.git</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">chmod </span><span class="pun">+</span><span class="pln">x shadowsocks</span><span class="pun">-</span><span class="pln">libev</span><span class="pun">.</span><span class="pln">sh</span></code></li><li class="L5"><code><span class="pun">./</span><span class="pln">shadowsocks</span><span class="pun">-</span><span class="pln">libev</span><span class="pun">.</span><span class="pln">sh </span><span class="lit">2</span><span class="pun">&gt;&amp;</span><span class="lit">1</span><span class="pln"> </span><span class="pun">|</span><span class="pln"> tee shadowsocks</span><span class="pun">-</span><span class="pln">libev</span><span class="pun">.</span><span class="pln">log</span></code></li><li class="L6"><code></code></li><li class="L7"><code></code></li><li class="L8"><code></code></li><li class="L9"><code><span class="com">//查看是否安装成功</span></code></li><li class="L0"><code><span class="pln">ps </span><span class="pun">-</span><span class="pln">ef </span><span class="pun">|</span><span class="pln"> grep ss</span><span class="pun">-</span><span class="pln">server </span><span class="pun">|</span><span class="pln"> grep </span><span class="pun">-</span><span class="pln">v ps </span><span class="pun">|</span><span class="pln"> grep </span><span class="pun">-</span><span class="pln">v grep</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="com">//启动ss</span></code></li><li class="L3"><code><span class="pln">service shadowsocks start </span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="com">//停止ss</span></code></li><li class="L6"><code><span class="pln">service shadowsocks stop</span></code></li><li class="L7"><code></code></li><li class="L8"><code><span class="com">//重启ss</span></code></li><li class="L9"><code><span class="pln">shadowsocks restart</span></code></li><li class="L0"><code></code></li><li class="L1"><code><span class="com">//更改 shadowsock 的配置 </span></code></li><li class="L2"><code><span class="pln">vi </span><span class="pun">/</span><span class="pln">etc</span><span class="pun">/</span><span class="pln">shadowsocks</span><span class="pun">-</span><span class="pln">libev</span><span class="pun">/</span><span class="pln">config</span><span class="pun">.</span><span class="pln">json</span></code></li></ol></pre><h2 id="h2-3-centos-l2tp-"><a name="3. centos 一键搭建 L2TP服务器" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3. centos 一键搭建 L2TP服务器</h2><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">wget </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">check</span><span class="pun">-</span><span class="pln">certificate HYPERLINK HYPERLINK </span><span class="str">"https://raw.githubusercontent.com/teddysun/across/master/l2tp.sh"</span></code></li><li class="L1"><code><span class="com">//或者</span></code></li><li class="L2"><code><span class="pln">git clone https</span><span class="pun">:</span><span class="com">//github.com/YuechiFu/vpn.git</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="pln">chmod </span><span class="pun">+</span><span class="pln">x l2tp</span><span class="pun">.</span><span class="pln">sh</span></code></li><li class="L5"><code><span class="pun">./</span><span class="pln">l2tp</span><span class="pun">.</span><span class="pln">sh</span></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="com">//验证</span></code></li><li class="L8"><code><span class="pln">ipsec setup restart </span></code></li><li class="L9"><code><span class="pln">xl2tpd </span><span class="pun">-</span><span class="pln">D </span></code></li><li class="L0"><code><span class="pln">ipsec verify</span></code></li></ol></pre><h2 id="h2-4-google-bbr-"><a name="4. Google BBR 拥塞控制算法一键安装脚本" class="reference-link"></a><span class="header-link octicon octicon-link"></span>4. Google BBR 拥塞控制算法一键安装脚本</h2><ul> <li><h4 id="h4-u5B89u88C5"><a name="安装" class="reference-link"></a><span class="header-link octicon octicon-link"></span>安装</h4> wget —no-check-certificate <a href="https://github.com/teddysun/across/raw/master/bbr.sh">https://github.com/teddysun/across/raw/master/bbr.sh</a> &amp;&amp; chmod +x bbr.sh &amp;&amp; ./bbr.sh</li></ul> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="com">//检查是否安装成功</span></code></li></ol></pre><ul> <li><h4 id="h4--"><a name="检查是否安装成功-" class="reference-link"></a><span class="header-link octicon octicon-link"></span>检查是否安装成功-</h4></li></ul> <pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">sysctl net</span><span class="pun">.</span><span class="pln">ipv4</span><span class="pun">.</span><span class="pln">tcp_available_congestion_control</span></code></li><li class="L1"><code><span class="pln"> </span><span class="com">//执行后输出值需为：net.ipv4.tcp_available_congestion_control = reno cubic bbr。</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="pln">sysctl net</span><span class="pun">.</span><span class="pln">ipv4</span><span class="pun">.</span><span class="pln">tcp_congestion_control</span></code></li><li class="L4"><code><span class="pln"> </span><span class="com">//执行后输出值需为：net.ipv4.tcp_congestion_control = bbr。</span></code></li><li class="L5"><code></code></li><li class="L6"><code><span class="pln">sysctl net</span><span class="pun">.</span><span class="pln">core</span><span class="pun">.</span><span class="pln">default_qdisc</span></code></li><li class="L7"><code><span class="pln"> </span><span class="com">//执行后输出值需为：net.core.default_qdisc = fq。</span></code></li><li class="L8"><code></code></li><li class="L9"><code><span class="com">//以上三条命令的输出值正确后则说明原版 Google BBR 已经成功安装并开机自启动。</span></code></li></ol></pre><p>更多信息参考 <a href="https://www.vultrcn.com/5.htmlhttps://www.vultrcn.com/5.html" title="原版 &amp; 魔改版 Google BBR 拥塞控制算法一键安装脚本">原版 &amp; 魔改版 Google BBR 拥塞控制算法一键安装脚本</a></p> <h2 id="h2-5-centos7-node-js-"><a name="5. Centos7 Node.js安装步骤" class="reference-link"></a><span class="header-link octicon octicon-link"></span>5. Centos7 Node.js安装步骤</h2><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code><span class="pln">yum install nodejs </span><span class="pun">-</span><span class="pln">y install npm </span><span class="pun">-</span><span class="pln">y </span></code></li></ol></pre></body> </html>
